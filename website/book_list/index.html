<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kaisei+Opti&display=swap" rel="stylesheet">
  <title>書籍一覧</title>
</head>

<body>

  <div class="header">
    <h1>書籍一覧</h1>
  </div>
  <hr />
  <main>
    <div class="flex">
      <div class="content">
        <p id="idName">
        <!-- <u1>
          <li>本タイトル</li>
          <li>分野</li>
          <li>出版年</li>
          <li>登録日</li>
          <li>書籍ID</li>
        </u1> -->
        </p>
        <!-- <div class="borrowed">
          <div id="text">
            貸出可能
          </div>
          <div id="circle">
            <img src="img/circle_img.png" alt="circle" />
          </div> -->

        </div>


        <div class="search">
          <label for="site-search"></label>
          <input type="search" id="site-search" name="q" disabled>
          <button disabled>検索</button>
        </div>
      </div>
    </div>
  </main>

</body>

<script>
 //新着図書APIにアクセス
  const api = 'https://script.google.com/macros/s/AKfycbyJZt3JBpYkZnP7pPI3DmRRlWCfFzGSmZA-53NXMOwW4c6T0fYddGIat48VMLMYcvx0pQ/exec?type=newBooks' //URLを挿入
  fetch(api)
    .then(res => res.json())
    .then(data => book(data))

  function book(data) {
    //var data = [{'bookId':'F2qxvscY','title':'Python自動処理','genre':'言語','image':'','publish':'2022/06/27','registration':'2022/02/03'}]
    let s = ''
    const list = data
    for (let row of list) {
    //console.log(row);
      s += `
      <div class = 'con'>
        <img src="${row['image']}" alt="">
      <div class = 'text'>
        <ul><li>タイトル : ${row['title']}</li>
        <li>分野 : ${row['genre']}</li>
        <li>出版年 : ${row['publish']}</li>
        <li>登録日 : ${row['registration']}</li>
        <li>書籍ID : ${row['bookId']}</li></ul>
        </div>
        </div>
        `
    }
    var mydiv = document.getElementById("idName");
    mydiv.innerHTML = s;
    //document.write(s)
  }

</script>

</html>